"use strict";(globalThis.webpackChunkrbac_algorithm_docs=globalThis.webpackChunkrbac_algorithm_docs||[]).push([[9034],{7362(e,r,n){n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"features/permissions-matrix","title":"Permissions Matrix","description":"The Permissions Matrix feature provides a visual, tabular interface for managing role-permission assignments. It displays roles as columns and permissions as rows, making it easy to see and modify which roles have which permissions.","source":"@site/docs/features/permissions-matrix.md","sourceDirName":"features","slug":"/features/permissions-matrix","permalink":"/RBAC-algorithm/docs/features/permissions-matrix","draft":false,"unlisted":false,"editUrl":"https://github.com/your-org/rbac-algorithm/tree/main/docs/docs/features/permissions-matrix.md","tags":[],"version":"current","frontMatter":{}}');var s=n(4848),a=n(8453);const t={},l="Permissions Matrix",o={},d=[{value:"Features",id:"features",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"PermissionsMatrixManager",id:"permissionsmatrixmanager",level:3},{value:"Constructor",id:"constructor",level:4},{value:"Methods",id:"methods",level:4},{value:"create_matrix()",id:"create_matrix",level:5},{value:"toggle_permission()",id:"toggle_permission",level:5},{value:"set_permission()",id:"set_permission",level:5},{value:"apply_changes()",id:"apply_changes",level:5},{value:"discard_changes()",id:"discard_changes",level:5},{value:"export_matrix_data()",id:"export_matrix_data",level:5},{value:"print_matrix()",id:"print_matrix",level:5},{value:"PermissionsMatrix",id:"permissionsmatrix",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Example 1: View Current Permissions",id:"example-1-view-current-permissions",level:3},{value:"Example 2: Make Changes",id:"example-2-make-changes",level:3},{value:"Example 3: Bulk Operations",id:"example-3-bulk-operations",level:3},{value:"Example 4: Filtered Matrix",id:"example-4-filtered-matrix",level:3},{value:"Example 5: Export and Audit",id:"example-5-export-and-audit",level:3},{value:"Example 6: Change Tracking",id:"example-6-change-tracking",level:3},{value:"Matrix Display",id:"matrix-display",level:2},{value:"Unicode vs ASCII Display",id:"unicode-vs-ascii-display",level:3},{value:"Change Workflow",id:"change-workflow",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Integration with RBAC",id:"integration-with-rbac",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"permissions-matrix",children:"Permissions Matrix"})}),"\n",(0,s.jsx)(r.p,{children:"The Permissions Matrix feature provides a visual, tabular interface for managing role-permission assignments. It displays roles as columns and permissions as rows, making it easy to see and modify which roles have which permissions."}),"\n",(0,s.jsx)(r.h2,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Visual Table Layout"}),": Clear matrix view with roles \xd7 permissions"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Two Modes"}),":","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"READONLY"}),": Safe viewing without modifications"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"EDITABLE"}),": Interactive permission management"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Change Tracking"}),": All modifications tracked before applying"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Bulk Operations"}),": Modify multiple permissions at once"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Export/Import"}),": JSON serialization for data portability"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Formatted Display"}),": Pretty-printed tables with Unicode/ASCII fallback"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'from rbac import RBAC, PermissionsMatrixManager, MatrixMode\r\n\r\n# Setup\r\nrbac = RBAC()\r\nstorage = rbac._storage\r\nmatrix_mgr = PermissionsMatrixManager(storage)\r\n\r\n# Create a read-only matrix\r\nmatrix = matrix_mgr.create_matrix(mode=MatrixMode.READONLY)\r\nmatrix_mgr.print_matrix(matrix)\r\n\r\n# Create an editable matrix\r\neditable_matrix = matrix_mgr.create_matrix(mode=MatrixMode.EDITABLE)\r\n\r\n# Toggle permission\r\nmatrix_mgr.toggle_permission(editable_matrix, "role_viewer", "perm_write")\r\n\r\n# Set specific state\r\nmatrix_mgr.set_permission(editable_matrix, "role_admin", "perm_delete", True)\r\n\r\n# Apply changes to storage\r\nresult = matrix_mgr.apply_changes(editable_matrix)\r\nprint(f"Applied {result[\'changes_applied\']} changes")\n'})}),"\n",(0,s.jsx)(r.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(r.h3,{id:"permissionsmatrixmanager",children:"PermissionsMatrixManager"}),"\n",(0,s.jsx)(r.p,{children:"Main class for managing permissions matrices."}),"\n",(0,s.jsx)(r.h4,{id:"constructor",children:"Constructor"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"matrix_mgr = PermissionsMatrixManager(storage: IStorageProvider)\n"})}),"\n",(0,s.jsx)(r.h4,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(r.h5,{id:"create_matrix",children:"create_matrix()"}),"\n",(0,s.jsx)(r.p,{children:"Create a new permissions matrix."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"matrix = matrix_mgr.create_matrix(\r\n    role_ids: Optional[List[str]] = None,\r\n    permission_ids: Optional[List[str]] = None,\r\n    domain: Optional[str] = None,\r\n    mode: MatrixMode = MatrixMode.READONLY,\r\n    show_inherited: bool = False\r\n)\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"role_ids"}),": Specific roles to include (None = all roles)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"permission_ids"}),": Specific permissions to include (None = all permissions)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"domain"}),": Domain filter for multi-tenancy"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"mode"}),": ",(0,s.jsx)(r.code,{children:"READONLY"})," or ",(0,s.jsx)(r.code,{children:"EDITABLE"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"show_inherited"}),": Display inherited permissions"]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Returns:"})," ",(0,s.jsx)(r.code,{children:"PermissionsMatrix"})," object"]}),"\n",(0,s.jsx)(r.h5,{id:"toggle_permission",children:"toggle_permission()"}),"\n",(0,s.jsx)(r.p,{children:"Toggle a permission's state for a role."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"changed = matrix_mgr.toggle_permission(\r\n    matrix: PermissionsMatrix,\r\n    role_id: str,\r\n    permission_id: str\r\n) -> bool\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Returns:"})," ",(0,s.jsx)(r.code,{children:"True"})," if state changed, ",(0,s.jsx)(r.code,{children:"False"})," if no change"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Raises:"})," ",(0,s.jsx)(r.code,{children:"ValidationError"})," if matrix is in READONLY mode"]}),"\n",(0,s.jsx)(r.h5,{id:"set_permission",children:"set_permission()"}),"\n",(0,s.jsx)(r.p,{children:"Set a permission to a specific state."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"matrix_mgr.set_permission(\r\n    matrix: PermissionsMatrix,\r\n    role_id: str,\r\n    permission_id: str,\r\n    granted: bool\r\n)\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"granted"}),": ",(0,s.jsx)(r.code,{children:"True"})," to grant permission, ",(0,s.jsx)(r.code,{children:"False"})," to revoke"]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Raises:"})," ",(0,s.jsx)(r.code,{children:"ValidationError"})," if matrix is in READONLY mode"]}),"\n",(0,s.jsx)(r.h5,{id:"apply_changes",children:"apply_changes()"}),"\n",(0,s.jsx)(r.p,{children:"Apply all pending changes to storage."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"result = matrix_mgr.apply_changes(matrix: PermissionsMatrix) -> Dict[str, Any]\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Returns:"})," Dictionary with:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'{\r\n    "success": bool,           # All changes applied successfully\r\n    "changes_applied": int,    # Number of changes applied\r\n    "errors": List[str]        # Error messages if any\r\n}\n'})}),"\n",(0,s.jsx)(r.h5,{id:"discard_changes",children:"discard_changes()"}),"\n",(0,s.jsx)(r.p,{children:"Discard all pending changes and revert to storage state."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"matrix_mgr.discard_changes(matrix: PermissionsMatrix)\n"})}),"\n",(0,s.jsx)(r.h5,{id:"export_matrix_data",children:"export_matrix_data()"}),"\n",(0,s.jsx)(r.p,{children:"Export matrix data as JSON-serializable dictionary."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"data = matrix_mgr.export_matrix_data(matrix: PermissionsMatrix) -> Dict[str, Any]\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Returns:"})," Dictionary containing roles, permissions, and assignments"]}),"\n",(0,s.jsx)(r.h5,{id:"print_matrix",children:"print_matrix()"}),"\n",(0,s.jsx)(r.p,{children:"Print formatted matrix table to console."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"matrix_mgr.print_matrix(\r\n    matrix: PermissionsMatrix,\r\n    show_descriptions: bool = False,\r\n    max_role_name_len: int = 15\r\n)\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"show_descriptions"}),": Include permission descriptions"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"max_role_name_len"}),": Maximum column width for role names"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"permissionsmatrix",children:"PermissionsMatrix"}),"\n",(0,s.jsx)(r.p,{children:"Data structure representing the permissions matrix."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Attributes:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"roles"}),": List of Role objects"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"permissions"}),": List of Permission objects"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"rows"}),": List of MatrixRow objects"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"mode"}),": ",(0,s.jsx)(r.code,{children:"READONLY"})," or ",(0,s.jsx)(r.code,{children:"EDITABLE"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"show_inherited"}),": Whether to display inherited permissions"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"changes"}),": Dictionary tracking pending changes"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Methods:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"has_changes() -> bool"}),": Check if there are pending changes"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"get_change_count() -> int"}),": Get number of pending changes"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,s.jsx)(r.h3,{id:"example-1-view-current-permissions",children:"Example 1: View Current Permissions"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"# Create read-only matrix\r\nmatrix = matrix_mgr.create_matrix(mode=MatrixMode.READONLY)\r\n\r\n# Display as table\r\nmatrix_mgr.print_matrix(matrix)\r\n\r\n# Output:\r\n# Feature                        |     Viewer      |     Editor      |      Admin\r\n# ------------------------------------------------------------------------------------\r\n# document - read                |        Y        |        Y        |        Y\r\n# document - write               |        N        |        Y        |        Y\r\n# document - delete              |        N        |        N        |        Y\n"})}),"\n",(0,s.jsx)(r.h3,{id:"example-2-make-changes",children:"Example 2: Make Changes"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'# Create editable matrix\r\nmatrix = matrix_mgr.create_matrix(mode=MatrixMode.EDITABLE)\r\n\r\n# Grant document write to Viewer\r\nmatrix_mgr.set_permission(matrix, "role_viewer", "perm_doc_write", True)\r\n\r\n# Toggle document delete for Admin\r\nmatrix_mgr.toggle_permission(matrix, "role_admin", "perm_doc_delete")\r\n\r\n# Check pending changes\r\nprint(f"{matrix.get_change_count()} changes pending")\r\n\r\n# Apply to storage\r\nresult = matrix_mgr.apply_changes(matrix)\r\nif result["success"]:\r\n    print(f"Applied {result[\'changes_applied\']} changes")\r\nelse:\r\n    print(f"Errors: {result[\'errors\']}")\n'})}),"\n",(0,s.jsx)(r.h3,{id:"example-3-bulk-operations",children:"Example 3: Bulk Operations"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'matrix = matrix_mgr.create_matrix(mode=MatrixMode.EDITABLE)\r\n\r\n# Grant all document permissions to Admin\r\nfor perm in matrix.permissions:\r\n    if perm.resource_type == "document":\r\n        matrix_mgr.set_permission(matrix, "role_admin", perm.id, True)\r\n\r\n# Revoke all user permissions from Viewer\r\nfor perm in matrix.permissions:\r\n    if perm.resource_type == "user":\r\n        matrix_mgr.set_permission(matrix, "role_viewer", perm.id, False)\r\n\r\n# Apply all changes at once\r\nresult = matrix_mgr.apply_changes(matrix)\n'})}),"\n",(0,s.jsx)(r.h3,{id:"example-4-filtered-matrix",children:"Example 4: Filtered Matrix"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'# Show only specific roles\r\nviewer_editor_matrix = matrix_mgr.create_matrix(\r\n    role_ids=["role_viewer", "role_editor"]\r\n)\r\nmatrix_mgr.print_matrix(viewer_editor_matrix)\r\n\r\n# Show only specific permissions\r\ndoc_perms = [p.id for p in storage.list_permissions() if p.resource_type == "document"]\r\ndoc_matrix = matrix_mgr.create_matrix(permission_ids=doc_perms)\r\nmatrix_mgr.print_matrix(doc_matrix)\n'})}),"\n",(0,s.jsx)(r.h3,{id:"example-5-export-and-audit",children:"Example 5: Export and Audit"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"# Export current state\r\ndata = matrix_mgr.export_matrix_data(matrix)\r\n\r\n# Analyze assignments\r\nprint(f\"Total roles: {len(data['roles'])}\")\r\nprint(f\"Total permissions: {len(data['permissions'])}\")\r\nprint(f\"Active assignments: {len(data['assignments'])}\")\r\n\r\n# List all role-permission pairs\r\nfor assignment in data['assignments']:\r\n    role_name = assignment['role_name']\r\n    perm = assignment['permission']\r\n    print(f\"{role_name} -> {perm['resource_type']}.{perm['action']}\")\n"})}),"\n",(0,s.jsx)(r.h3,{id:"example-6-change-tracking",children:"Example 6: Change Tracking"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'matrix = matrix_mgr.create_matrix(mode=MatrixMode.EDITABLE)\r\n\r\n# Make several changes\r\nmatrix_mgr.toggle_permission(matrix, "role_viewer", "perm_write")\r\nmatrix_mgr.toggle_permission(matrix, "role_editor", "perm_delete")\r\nmatrix_mgr.set_permission(matrix, "role_admin", "perm_special", True)\r\n\r\n# Review changes\r\nprint(f"{matrix.get_change_count()} changes pending:")\r\nmatrix_mgr.print_matrix(matrix)  # Shows pending indicator\r\n\r\n# Decide to discard\r\nmatrix_mgr.discard_changes(matrix)\r\nprint("Changes discarded")\n'})}),"\n",(0,s.jsx)(r.h2,{id:"matrix-display",children:"Matrix Display"}),"\n",(0,s.jsx)(r.p,{children:"The matrix uses a table format with:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Columns"}),": Roles (can be filtered)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Rows"}),": Permissions (feature name = resource_type - action)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Cells"}),": Y (granted), N (not granted), ^ (inherited)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Footer"}),": Shows pending changes count and mode"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"unicode-vs-ascii-display",children:"Unicode vs ASCII Display"}),"\n",(0,s.jsx)(r.p,{children:"The display automatically detects terminal encoding:"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Unicode"})," (UTF-8 terminals):"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"Feature                        \u2502     Viewer      \u2502     Editor      \u2502      Admin\r\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\ndocument - read                \u2502        \u2713        \u2502        \u2713        \u2502        \u2713\r\ndocument - write               \u2502        \u2717        \u2502        \u2713        \u2502        \u2713\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"ASCII"})," (Windows console, limited encoding):"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"Feature                        |     Viewer      |     Editor      |      Admin\r\n------------------------------------------------------------------------------------\r\ndocument - read                |        Y        |        Y        |        Y\r\ndocument - write               |        N        |        Y        |        Y\n"})}),"\n",(0,s.jsx)(r.h2,{id:"change-workflow",children:"Change Workflow"}),"\n",(0,s.jsx)(r.p,{children:"The matrix supports a transactional workflow:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Create editable matrix"})," - Enter editing mode"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Make changes"})," - Toggle/set permissions as needed"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Review changes"})," - Check pending changes count and display"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Decide"}),":","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Apply"})," - Persist changes to storage"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Discard"})," - Revert to storage state"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Verify"})," - Create new matrix to confirm changes"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"This workflow prevents accidental modifications and allows bulk changes to be applied atomically."}),"\n",(0,s.jsx)(r.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'from rbac import ValidationError\r\n\r\ntry:\r\n    # Attempt to modify read-only matrix\r\n    readonly_matrix = matrix_mgr.create_matrix(mode=MatrixMode.READONLY)\r\n    matrix_mgr.toggle_permission(readonly_matrix, "role_admin", "perm_write")\r\nexcept ValidationError as e:\r\n    print(f"Error: {e}")  # "Matrix must be in EDITABLE mode"\r\n\r\n# Apply changes with error checking\r\nresult = matrix_mgr.apply_changes(matrix)\r\nif not result["success"]:\r\n    for error in result["errors"]:\r\n        print(f"Failed: {error}")\n'})}),"\n",(0,s.jsx)(r.h2,{id:"integration-with-rbac",children:"Integration with RBAC"}),"\n",(0,s.jsx)(r.p,{children:"The permissions matrix integrates seamlessly with the RBAC system:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:'# Standard RBAC operations\r\nrbac = RBAC()\r\nrbac.create_role("role_admin", "Administrator")\r\nrbac.create_permission("perm_write", "document", "write")\r\n\r\n# Matrix operations use same storage\r\nmatrix_mgr = PermissionsMatrixManager(rbac._storage)\r\nmatrix = matrix_mgr.create_matrix()\r\n\r\n# Changes in matrix reflect in RBAC\r\nmatrix_mgr.set_permission(matrix, "role_admin", "perm_write", True)\r\nmatrix_mgr.apply_changes(matrix)\r\n\r\n# Verify with RBAC\r\nadmin_role = rbac._storage.get_role("role_admin")\r\nassert "perm_write" in admin_role.permissions  # True\n'})}),"\n",(0,s.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Use READONLY for viewing"})," - Prevent accidental modifications"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Review before applying"})," - Check ",(0,s.jsx)(r.code,{children:"get_change_count()"})," and display matrix"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Handle errors"})," - Check ",(0,s.jsx)(r.code,{children:'result["success"]'})," after applying"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Filter for performance"})," - Use ",(0,s.jsx)(r.code,{children:"role_ids"}),"/",(0,s.jsx)(r.code,{children:"permission_ids"})," for large systems"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Export for auditing"})," - Use ",(0,s.jsx)(r.code,{children:"export_matrix_data()"})," for compliance reports"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Batch changes"})," - Make multiple edits before applying to reduce transactions"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"../api/roles.md",children:"Role Management"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"../api/permissions.md",children:"Permission Management"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"multi-tenancy.md",children:"Multi-tenancy"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"../../examples/permissions_matrix_example.py",children:"Examples"})}),"\n"]})]})}function m(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,r,n){n.d(r,{R:()=>t,x:()=>l});var i=n(6540);const s={},a=i.createContext(s);function t(e){const r=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:r},e.children)}}}]);