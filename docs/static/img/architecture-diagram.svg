<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <defs>
    <style>
      .title { font: bold 24px sans-serif; fill: #2e8555; }
      .subtitle { font: bold 16px sans-serif; fill: #1c1e21; }
      .label { font: 14px sans-serif; fill: #1c1e21; }
      .small { font: 12px sans-serif; fill: #606770; }
      .box { fill: #fff; stroke: #2e8555; stroke-width: 2; rx: 8; }
      .protocol { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; rx: 8; }
      .component { fill: #f5f5f5; stroke: #606770; stroke-width: 1.5; rx: 6; }
      .model { fill: #fff3e0; stroke: #f57c00; stroke-width: 1.5; rx: 6; }
      .arrow { fill: none; stroke: #606770; stroke-width: 2; marker-end: url(#arrowhead); }
      .arrow-protocol { fill: none; stroke: #1976d2; stroke-width: 2; marker-end: url(#arrowhead-blue); stroke-dasharray: 5,5; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#606770" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1976d2" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" class="title">RBAC Algorithm Architecture</text>
  <text x="600" y="55" text-anchor="middle" class="small">Protocol-Based, Multi-Tenant, Enterprise-Grade</text>

  <!-- Layer 1: Application Layer -->
  <rect x="50" y="80" width="1100" height="100" class="box"/>
  <text x="600" y="105" text-anchor="middle" class="subtitle">Application Layer</text>
  
  <rect x="80" y="120" width="200" height="45" class="component"/>
  <text x="180" y="145" text-anchor="middle" class="label">Your Application</text>
  
  <rect x="320" y="120" width="200" height="45" class="component"/>
  <text x="420" y="137" text-anchor="middle" class="label">RBAC Class</text>
  <text x="420" y="155" text-anchor="middle" class="small">Main API Entry Point</text>

  <rect x="560" y="120" width="200" height="45" class="component"/>
  <text x="660" y="137" text-anchor="middle" class="label">Batch Operations</text>
  <text x="660" y="155" text-anchor="middle" class="small">Bulk Processing</text>

  <rect x="800" y="120" width="200" height="45" class="component"/>
  <text x="900" y="137" text-anchor="middle" class="label">Multi-Tenant</text>
  <text x="900" y="155" text-anchor="middle" class="small">Domain Isolation</text>

  <!-- Layer 2: Protocol Layer -->
  <rect x="50" y="200" width="1100" height="120" class="box"/>
  <text x="600" y="225" text-anchor="middle" class="subtitle">Protocol Layer (Interfaces)</text>
  
  <rect x="80" y="245" width="240" height="60" class="protocol"/>
  <text x="200" y="267" text-anchor="middle" class="label">IStorageProvider</text>
  <text x="200" y="285" text-anchor="middle" class="small">CRUD + Indexes</text>
  <text x="200" y="300" text-anchor="middle" class="small">Batch Operations</text>

  <rect x="350" y="245" width="240" height="60" class="protocol"/>
  <text x="470" y="267" text-anchor="middle" class="label">IAuthorizationEngine</text>
  <text x="470" y="285" text-anchor="middle" class="small">Permission Checks</text>
  <text x="470" y="300" text-anchor="middle" class="small">Context Evaluation</text>

  <rect x="620" y="245" width="240" height="60" class="protocol"/>
  <text x="740" y="267" text-anchor="middle" class="label">IRoleHierarchy</text>
  <text x="740" y="285" text-anchor="middle" class="small">Inheritance</text>
  <text x="740" y="300" text-anchor="middle" class="small">DAG Validation</text>

  <rect x="890" y="245" width="240" height="60" class="protocol"/>
  <text x="1010" y="267" text-anchor="middle" class="label">IPolicyEvaluator</text>
  <text x="1010" y="285" text-anchor="middle" class="small">ABAC Rules</text>
  <text x="1010" y="300" text-anchor="middle" class="small">12 Operators</text>

  <!-- Layer 3: Implementation Layer -->
  <rect x="50" y="340" width="1100" height="120" class="box"/>
  <text x="600" y="365" text-anchor="middle" class="subtitle">Implementation Layer</text>
  
  <rect x="80" y="385" width="240" height="60" class="component"/>
  <text x="200" y="407" text-anchor="middle" class="label">MemoryStorage</text>
  <text x="200" y="425" text-anchor="middle" class="small">In-Memory Store</text>
  <text x="200" y="440" text-anchor="middle" class="small">750+ lines</text>

  <rect x="350" y="385" width="240" height="60" class="component"/>
  <text x="470" y="407" text-anchor="middle" class="label">AuthEngine</text>
  <text x="470" y="425" text-anchor="middle" class="small">Permission Resolver</text>
  <text x="470" y="440" text-anchor="middle" class="small">540+ lines</text>

  <rect x="620" y="385" width="240" height="60" class="component"/>
  <text x="740" y="407" text-anchor="middle" class="label">HierarchyResolver</text>
  <text x="740" y="425" text-anchor="middle" class="small">Role Inheritance</text>
  <text x="740" y="440" text-anchor="middle" class="small">390+ lines</text>

  <rect x="890" y="385" width="240" height="60" class="component"/>
  <text x="1010" y="407" text-anchor="middle" class="label">PolicyEvaluator</text>
  <text x="1010" y="425" text-anchor="middle" class="small">ABAC Engine</text>
  <text x="1010" y="440" text-anchor="middle" class="small">380+ lines</text>

  <!-- Layer 4: Data Models -->
  <rect x="50" y="480" width="1100" height="100" class="box"/>
  <text x="600" y="505" text-anchor="middle" class="subtitle">Data Models</text>
  
  <rect x="100" y="525" width="140" height="45" class="model"/>
  <text x="170" y="550" text-anchor="middle" class="label">User</text>
  
  <rect x="260" y="525" width="140" height="45" class="model"/>
  <text x="330" y="550" text-anchor="middle" class="label">Role</text>
  
  <rect x="420" y="525" width="140" height="45" class="model"/>
  <text x="490" y="550" text-anchor="middle" class="label">Permission</text>
  
  <rect x="580" y="525" width="140" height="45" class="model"/>
  <text x="650" y="550" text-anchor="middle" class="label">Resource</text>
  
  <rect x="740" y="525" width="180" height="45" class="model"/>
  <text x="830" y="550" text-anchor="middle" class="label">RoleAssignment</text>

  <rect x="940" y="525" width="180" height="45" class="model"/>
  <text x="1030" y="550" text-anchor="middle" class="label">RoleInheritance</text>

  <!-- Layer 5: Storage Backends -->
  <rect x="50" y="600" width="1100" height="100" class="box"/>
  <text x="600" y="625" text-anchor="middle" class="subtitle">Storage Backends (Extensible)</text>
  
  <rect x="150" y="645" width="200" height="45" class="component"/>
  <text x="250" y="670" text-anchor="middle" class="label">SQL Database</text>
  
  <rect x="400" y="645" width="200" height="45" class="component"/>
  <text x="500" y="670" text-anchor="middle" class="label">NoSQL Database</text>
  
  <rect x="650" y="645" width="200" height="45" class="component"/>
  <text x="750" y="670" text-anchor="middle" class="label">Cloud Storage</text>

  <rect x="900" y="645" width="200" height="45" class="component"/>
  <text x="1000" y="670" text-anchor="middle" class="label">Custom Backend</text>

  <!-- Key Features Box -->
  <rect x="50" y="720" width="550" height="70" fill="#f0f9ff" stroke="#0ea5e9" stroke-width="2" rx="8"/>
  <text x="325" y="742" text-anchor="middle" class="subtitle">✨ Key Features</text>
  <text x="325" y="760" text-anchor="middle" class="small">• Protocol-Based Design • Multi-Tenancy • Role Hierarchy</text>
  <text x="325" y="777" text-anchor="middle" class="small">• ABAC Support (12 operators) • Batch Operations • Extensible Storage</text>

  <!-- Performance Stats -->
  <rect x="620" y="720" width="530" height="70" fill="#fdf4ff" stroke="#a855f7" stroke-width="2" rx="8"/>
  <text x="885" y="742" text-anchor="middle" class="subtitle">⚡ Performance</text>
  <text x="885" y="760" text-anchor="middle" class="small">• 3,500+ Lines of Code • Enterprise-Grade</text>
  <text x="885" y="777" text-anchor="middle" class="small">• Python 3.13+ • Fully Tested • Production Ready</text>

  <!-- Arrows: Application to RBAC Class -->
  <path d="M 280 142 L 320 142" class="arrow"/>

  <!-- Arrows: RBAC Class to Protocols -->
  <path d="M 380 165 L 380 245" class="arrow-protocol"/>
  <path d="M 460 165 L 460 245" class="arrow-protocol"/>
  <path d="M 540 165 L 650 245" class="arrow-protocol"/>
  <path d="M 580 165 L 900 245" class="arrow-protocol"/>

  <!-- Arrows: Protocols to Implementations -->
  <path d="M 200 305 L 200 385" class="arrow"/>
  <path d="M 470 305 L 470 385" class="arrow"/>
  <path d="M 740 305 L 740 385" class="arrow"/>
  <path d="M 1010 305 L 1010 385" class="arrow"/>

  <!-- Arrows: Implementations to Models -->
  <path d="M 200 445 L 200 525" class="arrow"/>
  <path d="M 470 445 L 470 525" class="arrow"/>
  <path d="M 740 445 L 740 525" class="arrow"/>

  <!-- Arrows: Storage to Backends -->
  <path d="M 150 445 L 250 645" class="arrow"/>
  <path d="M 200 445 L 500 645" class="arrow"/>
  <path d="M 250 445 L 750 645" class="arrow"/>
  <path d="M 300 445 L 1000 645" class="arrow"/>
</svg>
